{% extends "base.html" %}
{% load i18n %}
{% block content %}
<main class="max-w-4xl mx-auto px-6 py-8">
  <h1 class="text-3xl font-bold text-gray-900 mb-8">{% trans "Auglýsa verkefni" %}</h1>

  <form method="post" class="space-y-8" novalidate>
    {% csrf_token %}
    
    <div class="pb-6 border-b border-gray-300">
      <h2 class="text-xl font-semibold text-blue-700 mb-4">{% trans "Grunnupplýsingar" %}</h2>
      
      <div class="space-y-4">
        <div>
          {{ form.title.label_tag }}
          {{ form.title }}
          {% if form.title.errors %}
            <div class="text-red-600 text-sm mt-1">{{ form.title.errors }}</div>
          {% endif %}
        </div>
        
        <div>
          {{ form.description.label_tag }}
          {{ form.description }}
          {% if form.description.errors %}
            <div class="text-red-600 text-sm mt-1">{{ form.description.errors }}</div>
          {% endif %}
        </div>
        
        <div>
          {{ form.company_name.label_tag }}
          {{ form.company_name }}
          {% if form.company_name.errors %}
            <div class="text-red-600 text-sm mt-1">{{ form.company_name.errors }}</div>
          {% endif %}
        </div>
        
        <div>
          {{ form.contact_name.label_tag }}
          {{ form.contact_name }}
          {% if form.contact_name.errors %}
            <div class="text-red-600 text-sm mt-1">{{ form.contact_name.errors }}</div>
          {% endif %}
        </div>
        
        <div>
          {{ form.contact_email.label_tag }}
          {{ form.contact_email }}
          {% if form.contact_email.errors %}
            <div class="text-red-600 text-sm mt-1">{{ form.contact_email.errors }}</div>
          {% endif %}
        </div>
      </div>
    </div>
    
    <div class="pb-6 border-b border-gray-300">
      <h2 class="text-xl font-semibold text-blue-700 mb-4">{% trans "Fjármögnun" %}</h2>
      
      <div class="flex items-start gap-2 mb-4">
        {{ form.is_funded }}
        <div>
          {{ form.is_funded.label_tag }}
          {% if form.is_funded.help_text %}
            <small class="block text-gray-600 italic mt-1">{{ form.is_funded.help_text }}</small>
          {% endif %}
        </div>
        {% if form.is_funded.errors %}
          <div class="text-red-600 text-sm mt-1">{{ form.is_funded.errors }}</div>
        {% endif %}
      </div>
      
      <div id="funding-amount-field" style="display: none;">
        {{ form.funding_amount.label_tag }}
        {{ form.funding_amount }}
        {% if form.funding_amount.help_text %}
          <small class="block text-gray-600 italic mt-1">{{ form.funding_amount.help_text }}</small>
        {% endif %}
        {% if form.funding_amount.errors %}
          <div class="text-red-600 text-sm mt-1">{{ form.funding_amount.errors }}</div>
        {% endif %}
      </div>
    </div>
    
    <div class="pb-6 border-b border-gray-300">
      <h2 class="text-xl font-semibold text-blue-700 mb-4">{% trans "Óskir um leiðbeinendur" %}</h2>
      
      {{ form.requested_advisors.label_tag }}
      {% if form.requested_advisors.help_text %}
        <small class="block text-gray-600 italic mt-1">{{ form.requested_advisors.help_text }}</small>
      {% endif %}
      <div class="max-h-48 overflow-y-auto border border-gray-300 rounded-md p-4 bg-white mt-2">
        {{ form.requested_advisors }}
      </div>
      {% if form.requested_advisors.errors %}
        <div class="text-red-600 text-sm mt-1">{{ form.requested_advisors.errors }}</div>
      {% endif %}
    </div>
    
    <div class="pb-6">
      <h2 class="text-xl font-semibold text-blue-700 mb-4">{% trans "Aðrar upplýsingar" %}</h2>
      
      {{ form.other.label_tag }}
      {{ form.other }}
      {% if form.other.help_text %}
        <small class="block text-gray-600 italic mt-1">{{ form.other.help_text }}</small>
      {% endif %}
      {% if form.other.errors %}
        <div class="text-red-600 text-sm mt-1">{{ form.other.errors }}</div>
      {% endif %}
    </div>
    
    <button type="submit" class="bg-pink-600 hover:bg-pink-700 text-white px-8 py-3 rounded-md text-lg font-semibold cursor-pointer transition-colors duration-200 mt-8">
      {% trans "Senda inn" %}
    </button>
  </form>
</main>

<style>
/* Form input styling with visible borders - using regular CSS */
input[type="text"], 
input[type="email"], 
input[type="number"], 
textarea, 
select {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #d1d5db !important; /* Gray-300 with !important to override */
  border-radius: 6px;
  transition: all 0.2s ease;
  font-size: 16px;
  background-color: white;
}

input[type="text"]:focus, 
input[type="email"]:focus, 
input[type="number"]:focus, 
textarea:focus, 
select:focus {
  outline: none;
  border-color: #3b82f6 !important; /* Blue-500 */
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Label styling */
label {
  display: block;
  font-weight: 600;
  color: #374151; /* Gray-700 */
  margin-bottom: 4px;
  font-size: 14px;
}

/* Checkbox styling */
input[type="checkbox"] {
  margin-top: 4px;
  width: auto !important;
  min-height: auto !important;
}

/* Checkbox container styling */
#id_requested_advisors ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#id_requested_advisors li {
  margin-bottom: 8px;
}

#id_requested_advisors label {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: normal;
  margin: 0;
  width: 100%;
  transition: background-color 0.2s ease;
}

#id_requested_advisors label:hover {
  background-color: #f3f4f6; /* Gray-100 */
}

#id_requested_advisors input[type="checkbox"] {
  flex-shrink: 0;
  width: auto !important;
  min-height: auto !important;
  margin: 0 !important;
}

/* Scrollbar styling */
.max-h-48::-webkit-scrollbar {
  width: 8px;
}

.max-h-48::-webkit-scrollbar-track {
  background: #f3f4f6;
  border-radius: 4px;
}

.max-h-48::-webkit-scrollbar-thumb {
  background: #9ca3af;
  border-radius: 4px;
}

.max-h-48::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const isFundedCheckbox = document.getElementById('id_is_funded');
  const fundingAmountField = document.getElementById('funding-amount-field');
  
  function toggleFundingAmount() {
    if (isFundedCheckbox.checked) {
      fundingAmountField.style.display = 'block';
    } else {
      fundingAmountField.style.display = 'none';
      // Clear the amount if not funded
      const amountInput = fundingAmountField.querySelector('input');
      if (amountInput) {
        amountInput.value = '';
      }
    }
  }
  
  // Initialize on page load
  toggleFundingAmount();
  
  // Listen for changes
  isFundedCheckbox.addEventListener('change', toggleFundingAmount);
});
</script>
{% endblock %}